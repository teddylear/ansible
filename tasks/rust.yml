- name: Check rust version
  ansible.builtin.shell: rustc --version | grep {{ rust_version }} && echo 'ok'
  register: check_rust
  ignore_errors: true
  tags:
    - rust
- name: Install rust
  ansible.builtin.shell: curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y""
  when: check_rust.rc != 0
  args:
      chdir: "{{ lookup('env', 'HOME') }}/Downloads"
  tags:
    - rust
- name: Check cargo-edit version
  ansible.builtin.shell: type cargo-add
  register: check_cargo_edit
  ignore_errors: true
  tags:
    - cargo-edit
- name: Install cargo-edit
  ansible.builtin.shell: cargo install cargo-edit
  when: check_cargo_edit.rc != 0
  tags:
    - cargo-edit
